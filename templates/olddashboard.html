<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <style>
        html { 
            zoom: 2; 
        }
        h1 {
            font-family:'Noto Sans',monospace, 'Segoe UI', sans-serif;
        }
        p, div {
            font-family:'Noto Sans', monospace, 'Segoe UI', sans-serif;
            font-size: 13px;
            vertical-align: middle;
        }
        .wm_element_text {
            font-size: 12px;
        }
        .updatetime, .location, .legend {
            font-size: 8px;
        }
        input.wm_toggle_stats {
            font-family:'Noto Sans',monospace, 'Segoe UI', sans-serif; ;
            font-size: 7px;
            color: #000000;
        }
    </style>
    
    <title>Idle Washer</title>

    {{ turbo() }}  <!-- Calling this function to initialize the turbo.js library. -->
    
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>

</head>

<body style="background: rgb(245, 245, 245);">
    <div id="bg-flex-container" 
        style="      
        display:flex;
        flex-direction:row;
        justify-content:center;
        align-items: center;
        ">
        <div id="content-flex-container" 
            style="
            display:flex;
            flex-direction:column;
            justify-content:flex-start;
            align-items: flex-start;
            ">

            <!-- Title -->
            <div style="
                display: flex;
                justify-content: center;
                align-items: flex-start;">
                
                <h2>Check Washing Machine </h2> 
                
                <div style="
                margin-block-start: 0.83em;
                margin-block-end: 0.83em;
                margin-inline-start: 0px;
                margin-inline-end: 0px;
                font-size: 1.5em;"> &nbsp;&#129530;</div>
            </div>
            
            <!-- Legend -->
            <div >
                <p class="legend" style="font-size: 8px;">Legend: &emsp; &#11036; <em> Idle </em> &emsp; &#128999; <em> Busy </em></p>
            </div>

            <!-- Update Time -->
            <div>
                <p class="updatetime">Last updated at 
                    {% include 'wm_update_time.html' %}
                </p>
            </div>

            <!-- WM component: location, wm boxes, stats button -->
            <div style="display:flex; flex-direction:column; align-items: flex-start;">
                
                <!-- Location -->
                <p class="location">Location: 
                    <code style="    
                    color: #383838;
                    font-size: 8px;
                    font-weight: 300;
                    border: 0.1px solid #adadad;
                    border-radius: 3px;
                    padding: 0.1rem 0.4rem;"
                    >K10, UB1, GF right wing
                    </code> 
                </p>

                <!-- Row of Columns of WM Box & Stats Toggle button -->
                <div style="display:flex; flex-direction:row; align-items: flex-start; padding-top: 5px;">
                    <div class='wm_element_columns' style="display:flex; flex-direction:column; align-items: flex-start;">
                        
                        <!-- WM Box -->
                        {% include 'wm_element.html' %}
                        
                        <!-- Stats Toggle Button -->
                        <div style="width:54px;">
                            <input 
                                class="wm_toggle_stats" 
                                type="button" 
                                value="Stats" 
                                onclick="toggleStats()"
                                style="margin-top: 10px;"
                            />                              
                        </div>                     
                        
                    </div>
                </div>

            </div>

            <!-- Display statistics component -->
            <div class='wm_element_columns' style="display:flex; flex-direction:column; align-items: flex-start;">
            <div id='wm_1_stats' style="
                margin-top: 10px;
                padding-left: 10px;
                padding-right: 10px;
                padding-bottom: 10px;
                display: none;
                background-color: #ffffff; 
                text-align: center;
                vertical-align: middle;"> 
                
                <p><span style="font-family:'Noto Sans'; font-size:9px; color:#333333;">WM {{ wm_id }}</span></p>
                
                <div style="
                    margin-top: 10px;
                    padding-left: 10px;
                    padding-right: 10px;
                    padding-bottom: 10px;">
                    <img src='static/wm1heatmap.png' style='width:200px; height:auto;'>
                </div>    
            </div>
            <script>
                function toggleStats() {
                    var x = document.getElementById("wm_1_stats");
                    if (x.style.display === "none") {
                        x.style.display = "block";
                    } else {
                        x.style.display = "none";
                    }
                }
            </script>
            
        </div>
        </div>
    </div>

</body>
</html>